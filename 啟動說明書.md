# ğŸš€ Core Agentic Brain - å®Œæ•´å•Ÿå‹•èªªæ˜æ›¸

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

Core Agentic Brain æ˜¯ä¸€å€‹æ•´åˆäº† OpenManus å¾Œç«¯å’Œ Web App å‰ç«¯çš„æ™ºèƒ½åŠ©æ‰‹ç³»çµ±ï¼Œå…·å‚™ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- ğŸ§  **æ™ºèƒ½å°è©±**: åŸºæ–¼ OpenManus çš„ AI åŠ©æ‰‹
- ğŸŒ **Web ç•Œé¢**: ç¾ä»£åŒ–çš„ç€è¦½å™¨ç•Œé¢
- ğŸ“Š **Token ç›£æ§**: å¯¦æ™‚ Token ä½¿ç”¨é‡ç›£æ§å’Œå„ªåŒ–
- ğŸ”§ **å·¥å…·æ•´åˆ**: Browserã€Searchã€Code ç­‰å·¥å…·
- ğŸ’¾ **å·¥ä½œå€ç®¡ç†**: è‡ªå‹•æ–‡ä»¶ç®¡ç†å’Œå·¥ä½œå€éš”é›¢

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
core_agentic_brain/
â”œâ”€â”€ OpenManus/          # å¾Œç«¯æ ¸å¿ƒï¼ˆAI å¼•æ“ï¼‰
â”œâ”€â”€ web_app/           # å‰ç«¯ç•Œé¢
â”œâ”€â”€ web_run.py         # çµ±ä¸€å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ workspace/         # å·¥ä½œå€ç›®éŒ„
â””â”€â”€ logs/             # æ—¥èªŒç›®éŒ„
```

## ğŸ› ï¸ ç’°å¢ƒè¦æ±‚

### ç³»çµ±è¦æ±‚
- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- 4GB+ è¨˜æ†¶é«”
- ç¶²è·¯é€£æ¥ï¼ˆç”¨æ–¼ AI API èª¿ç”¨ï¼‰

### å¿…è¦ä¾è³´
```bash
fastapi>=0.115.11
uvicorn>=0.34.0
openai>=1.66.3
browser-use>=0.1.40
pydantic>=2.10.6
loguru>=0.7.3
python-dotenv
```

## ğŸ“¦ å®‰è£æ­¥é©Ÿ

### 1. å…‹éš†å°ˆæ¡ˆ
```bash
git clone <repository-url>
cd core_agentic_brain
```

### 2. å®‰è£ä¾è³´
```bash
# å®‰è£ OpenManus ä¾è³´
cd OpenManus
pip install -r requirements.txt
cd ..
```

### 3. ç’°å¢ƒé…ç½®
åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å‰µå»º `.env` æª”æ¡ˆï¼š

```bash
# API é…ç½®
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ç€è¦½å™¨è¨­å®š
AUTO_OPEN_BROWSER=1

# å·¥ä½œå€è¨­å®š
WORKSPACE_DIR=./workspace
LOGS_DIR=./logs

# å„ªåŒ–è¨­å®šï¼ˆå¯é¸ï¼‰
ENABLE_TOKEN_OPTIMIZATION=true
DEFAULT_TOKEN_BUDGET=3000
```

## ğŸš€ å•Ÿå‹•æ–¹å¼

### æ–¹å¼ä¸€ï¼šä½¿ç”¨çµ±ä¸€å•Ÿå‹•è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
```bash
python web_run.py
```

### æ–¹å¼äºŒï¼šä½¿ç”¨ uvicorn ç›´æ¥å•Ÿå‹•
```bash
cd web_app
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

### æ–¹å¼ä¸‰ï¼šåœ¨é–‹ç™¼æ¨¡å¼ä¸­å•Ÿå‹•
```bash
cd OpenManus
python main.py --web
```

## ğŸŒ è¨ªå•ç•Œé¢

å•Ÿå‹•æˆåŠŸå¾Œï¼Œæ‰“é–‹ç€è¦½å™¨è¨ªå•ï¼š
- **ä¸»ç•Œé¢**: http://localhost:8000
- **API æ–‡æª”**: http://localhost:8000/docs
- **å¥åº·æª¢æŸ¥**: http://localhost:8000/api/health

## ğŸ”§ åŠŸèƒ½èªªæ˜

### ä¸»è¦ç•Œé¢
- **å·¦å´é¢æ¿**: AI æ€è€ƒéç¨‹ã€Token ç›£æ§ã€å·¥ä½œå€æ–‡ä»¶
- **å³å´é¢æ¿**: èŠå¤©ç•Œé¢ã€æ¶ˆæ¯æ­·å²

### Token ç›£æ§åŠŸèƒ½
- å¯¦æ™‚é¡¯ç¤º Token ä½¿ç”¨é‡
- è‡ªå‹•è®Šè‰²è­¦å‘Šï¼ˆ60% é»ƒè‰²ï¼Œ80% ç´…è‰²ï¼‰
- é¡¯ç¤ºç¯€çœçš„ Token æ•¸é‡

### API ç«¯é»
```bash
# èŠå¤©åŠŸèƒ½
POST /api/chat                    # å‰µå»ºæ–°èŠå¤©
GET /api/chat/{session_id}        # ç²å–èŠå¤©çµæœ
POST /api/chat/{session_id}/stop  # åœæ­¢è™•ç†

# ç³»çµ±ç›£æ§
GET /api/health                   # å¥åº·æª¢æŸ¥
GET /api/metrics                  # ç³»çµ±æŒ‡æ¨™

# æ–‡ä»¶ç®¡ç†
GET /api/files                    # ç²å–å·¥ä½œå€æ–‡ä»¶
GET /api/files/{path}             # ç²å–ç‰¹å®šæ–‡ä»¶

# WebSocket
/ws/{session_id}                  # ä¸»è¦é€šä¿¡
/ws/tokens/{session_id}           # Token ç›£æ§
```

## ğŸ§ª æ¸¬è©¦æŒ‡ä»¤

### 1. å¥åº·æª¢æŸ¥
```bash
curl http://localhost:8000/api/health
```

é æœŸè¼¸å‡ºï¼š
```json
{
  "status": "healthy",
  "components": {
    "web_app": "ok",
    "optimization": "ok",
    "browser_tool": "ok"
  },
  "timestamp": 1641234567.89
}
```

### 2. ç³»çµ±æŒ‡æ¨™
```bash
curl http://localhost:8000/api/metrics
```

### 3. ç°¡å–®å°è©±æ¸¬è©¦
```bash
curl -X POST http://localhost:8000/api/chat \
     -H "Content-Type: application/json" \
     -d '{"prompt": "ä½ å¥½ï¼Œè«‹ä»‹ç´¹ä½ è‡ªå·±"}'
```

### 4. æ¸¬è©¦ Token å„ªåŒ–
```bash
curl -X POST http://localhost:8000/api/chat \
     -H "Content-Type: application/json" \
     -d '{"prompt": "ä»Šå¤©å¤©æ°£å¦‚ä½•ï¼Ÿ"}'
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. å•Ÿå‹•å¤±æ•—ï¼šç¼ºå°‘ä¾è³´
```bash
# è§£æ±ºæ–¹æ³•ï¼šå®‰è£ç¼ºå°‘çš„åŒ…
pip install <package_name>
```

#### 2. API Key æœªé…ç½®
```
âŒ Error: OpenAI API key not found
```
**è§£æ±ºæ–¹æ³•**: æª¢æŸ¥ `.env` æª”æ¡ˆä¸­çš„ `OPENAI_API_KEY`

#### 3. ç«¯å£è¢«å ç”¨
```
âŒ Error: Port 8000 already in use
```
**è§£æ±ºæ–¹æ³•**:
```bash
# æŸ¥æ‰¾å ç”¨ç¨‹åº
lsof -i :8000
# çµ‚æ­¢ç¨‹åºæˆ–æ›´æ”¹ç«¯å£
uvicorn app:app --port 8001
```

#### 4. Token ç›£æ§ä¸é¡¯ç¤º
- æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰ WebSocket éŒ¯èª¤
- ç¢ºèªå„ªåŒ–æ¨¡çµ„æ˜¯å¦æ­£ç¢ºå°å…¥

#### 5. Browser å·¥å…·åˆå§‹åŒ–å¤±æ•—
```bash
# å®‰è£ playwright browsers
playwright install
```

### æ—¥èªŒæŸ¥çœ‹
```bash
# æŸ¥çœ‹æ‡‰ç”¨æ—¥èªŒ
tail -f logs/app.log

# æŸ¥çœ‹ç‰¹å®š session æ—¥èªŒ
tail -f logs/job_<session_id>.log
```

## ğŸ“ˆ æ€§èƒ½å„ªåŒ–

### æ¨è–¦è¨­å®š
```bash
# .env æª”æ¡ˆä¸­çš„å„ªåŒ–è¨­å®š
ENABLE_TOKEN_OPTIMIZATION=true
DEFAULT_TOKEN_BUDGET=3000
CIRCUIT_BREAKER_ENABLED=true
AUTO_CLEANUP_WORKSPACE=true
```

### é æœŸæ•ˆæœ
- Token ä½¿ç”¨é™ä½ 50-70%
- æ¯æœˆç¯€çœ API æˆæœ¬ $2000+
- Browser éŒ¯èª¤è‡ªå‹•ç†”æ–·
- å·¥ä½œå€è‡ªå‹•æ¸…ç†

## ğŸ“Š ç›£æ§èˆ‡ç¶­è­·

### å®šæœŸæª¢æŸ¥
```bash
# 1. å¥åº·æª¢æŸ¥
curl http://localhost:8000/api/health

# 2. æª¢æŸ¥ç³»çµ±æŒ‡æ¨™
curl http://localhost:8000/api/metrics

# 3. æª¢æŸ¥æ—¥èªŒå¤§å°
du -h logs/

# 4. æª¢æŸ¥å·¥ä½œå€å¤§å°
du -h workspace/
```

### æ—¥èªŒè¼ªè½‰
å»ºè­°è¨­ç½®æ—¥èªŒè¼ªè½‰ä»¥é˜²æ­¢æ—¥èªŒæ–‡ä»¶éå¤§ï¼š
```bash
# æ¯å¤©å£“ç¸®å‰ä¸€å¤©çš„æ—¥èªŒ
find logs/ -name "*.log" -mtime +1 -exec gzip {} \;
```

## ğŸ¤ é–‹ç™¼æŒ‡å—

### æœ¬åœ°é–‹ç™¼
```bash
# é–‹ç™¼æ¨¡å¼å•Ÿå‹•ï¼ˆè‡ªå‹•é‡è¼‰ï¼‰
uvicorn web_app.app:app --reload --port 8000

# é‹è¡Œæ¸¬è©¦
cd OpenManus
pytest tests/
```

### æ·»åŠ æ–°åŠŸèƒ½
1. å¾Œç«¯ APIï¼šä¿®æ”¹ `web_app/app.py`
2. å‰ç«¯ç•Œé¢ï¼šä¿®æ”¹ `web_app/static/` ä¸‹çš„æª”æ¡ˆ
3. AI åŠŸèƒ½ï¼šä¿®æ”¹ `OpenManus/app/` ä¸‹çš„æª”æ¡ˆ

## ğŸ“ æ›´æ–°æ—¥èªŒ

### v1.0 (Current)
- âœ… åŸºç¤ Web ç•Œé¢
- âœ… Token ç›£æ§åŠŸèƒ½
- âœ… ç³»çµ±å¥åº·æª¢æŸ¥
- âœ… å·¥ä½œå€ç®¡ç†
- âœ… å¯¦æ™‚é€šä¿¡

### è¨ˆåŠƒä¸­åŠŸèƒ½
- ğŸ”„ ç”¨æˆ¶èªè­‰ç³»çµ±
- ğŸ”„ å¤šæ¨¡å‹æ”¯æŒ
- ğŸ”„ é«˜ç´šåˆ†æåŠŸèƒ½
- ğŸ”„ é›†ç¾¤éƒ¨ç½²æ”¯æŒ

## ğŸ“ æŠ€è¡“æ”¯æŒ

å¦‚æœ‰å•é¡Œï¼Œè«‹ï¼š
1. æª¢æŸ¥æœ¬èªªæ˜æ›¸çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æŸ¥çœ‹æ—¥èªŒæ–‡ä»¶ `logs/app.log`
3. å‰µå»º GitHub Issue

---

**ğŸ‰ æ­å–œï¼æ‚¨å·²ç¶“æˆåŠŸè¨­ç½® Core Agentic Brain ç³»çµ±**

é–‹å§‹ä½¿ç”¨ï¼šæ‰“é–‹ http://localhost:8000 ä¸¦å˜—è©¦æ‚¨çš„ç¬¬ä¸€æ¬¡å°è©±ï¼